<%- include('../layouts/userHeader.ejs') %>



<!-- Breadcrumb Section Begin -->
<section class="breadcrumb-option">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb__text">
                    <h4>Shop</h4>
                    <div class="breadcrumb__links">
                        <a href="/">HOME</a>
                        <span>SHOP</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Breadcrumb Section End -->

<!-- Shop Section Begin -->
<section class="shop spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="shop__sidebar">
                    <!-- Shop Sidebar Search Section -->
                    <div class="shop__sidebar__search">
                        <form action="/shop" method="get"> 
                            <input type="text" name="search" placeholder="Search..." value="<%= renderData.search || '' %>">
                            <button type="submit"><span class="icon_search"></span></button>
                        </form>
                    </div>
                    <div class="shop__sidebar__accordion">
                        <div class="accordion" id="accordionExample">
                            <div class="card">
                                <div class="card-heading">
                                    <a data-toggle="collapse" data-target="#collapseOne">Categories</a>
                                </div>
                                <div id="collapseOne" class="collapse show" data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="shop__sidebar__categories">
                                            <ul class="nice-scroll">
                                                <li><a href="#">Men (20)</a></li>
                                                <li><a href="#">Women (20)</a></li>
                                                <li><a href="#">Bags (20)</a></li>
                                                <li><a href="#">Clothing (20)</a></li>
                                                <li><a href="#">Shoes (20)</a></li>
                                                <li><a href="#">Accessories (20)</a></li>
                                                <li><a href="#">Kids (20)</a></li>
                                                <li><a href="#">Kids (20)</a></li>
                                                <li><a href="#">Kids (20)</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-heading">
                                    <a data-toggle="collapse" data-target="#collapseTwo">Branding</a>
                                </div>
                                <div id="collapseTwo" class="collapse show" data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="shop__sidebar__brand">
                                            <ul>
                                                <li><a href="#">Louis Vuitton</a></li>
                                                <li><a href="#">Chanel</a></li>
                                                <li><a href="#">Hermes</a></li>
                                                <li><a href="#">Gucci</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-heading">
                                    <a data-toggle="collapse" data-target="#collapseThree">Filter Price</a>
                                </div>
                                <div id="collapseThree" class="collapse show" data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="shop__sidebar__price">
                                            <ul>
                                                <li><a href="#">$0.00 - $50.00</a></li>
                                                <li><a href="#">$50.00 - $100.00</a></li>
                                                <li><a href="#">$100.00 - $150.00</a></li>
                                                <li><a href="#">$150.00 - $200.00</a></li>
                                                <li><a href="#">$200.00 - $250.00</a></li>
                                                <li><a href="#">250.00+</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-heading">
                                    <a data-toggle="collapse" data-target="#collapseFour">Size</a>
                                </div>
                                <div id="collapseFour" class="collapse show" data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="shop__sidebar__size">
                                            <label for="xs">xs
                                                <input type="radio" id="xs">
                                            </label>
                                            <label for="sm">s
                                                <input type="radio" id="sm">
                                            </label>
                                            <label for="md">m
                                                <input type="radio" id="md">
                                            </label>
                                            <label for="xl">xl
                                                <input type="radio" id="xl">
                                            </label>
                                            <label for="2xl">2xl
                                                <input type="radio" id="2xl">
                                            </label>
                                            <label for="xxl">xxl
                                                <input type="radio" id="xxl">
                                            </label>
                                            <label for="3xl">3xl
                                                <input type="radio" id="3xl">
                                            </label>
                                            <label for="4xl">4xl
                                                <input type="radio" id="4xl">
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-heading">
                                    <a data-toggle="collapse" data-target="#collapseFive">Colors</a>
                                </div>
                                <div id="collapseFive" class="collapse show" data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="shop__sidebar__color">
                                            <label class="c-1" for="sp-1">
                                                <input type="radio" id="sp-1">
                                            </label>
                                            <label class="c-2" for="sp-2">
                                                <input type="radio" id="sp-2">
                                            </label>
                                            <label class="c-3" for="sp-3">
                                                <input type="radio" id="sp-3">
                                            </label>
                                            <label class="c-4" for="sp-4">
                                                <input type="radio" id="sp-4">
                                            </label>
                                            <label class="c-5" for="sp-5">
                                                <input type="radio" id="sp-5">
                                            </label>
                                            <label class="c-6" for="sp-6">
                                                <input type="radio" id="sp-6">
                                            </label>
                                            <label class="c-7" for="sp-7">
                                                <input type="radio" id="sp-7">
                                            </label>
                                            <label class="c-8" for="sp-8">
                                                <input type="radio" id="sp-8">
                                            </label>
                                            <label class="c-9" for="sp-9">
                                                <input type="radio" id="sp-9">
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-heading">
                                    <a data-toggle="collapse" data-target="#collapseSix">Tags</a>
                                </div>
                                <div id="collapseSix" class="collapse show" data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="shop__sidebar__tags">
                                            <a href="#">Product</a>
                                            <a href="#">Bags</a>
                                            <a href="#">Shoes</a>
                                            <a href="#">Fashio</a>
                                            <a href="#">Clothing</a>
                                            <a href="#">Hats</a>
                                            <a href="#">Accessories</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-9">
                <div class="shop__product__option">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <div class="shop__product__option__left">
                                <p>Showing 1–12 of 126 results</p>
                            </div>
                        </div>
                        <!-- Shop Product Option Right Section (Sort By Dropdown) -->
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <div class="shop__product__option__right">
                                <p>Sort by:</p>
                                <form action="/shop" method="get">
                                    <select name="sortBy" onchange="this.form.submit()">
                                        <option value="popularity" 
                                            <% if (sortBy === 'popularity') { %> selected <% } %>
                                        >Popularity</option>
                                        
                                        <option value="price_low_to_high" 
                                            <% if (sortBy === 'price_low_to_high') { %> selected <% } %>
                                        >Price: Low to High</option>
                                        
                                        <option value="price_high_to_low" 
                                            <% if (sortBy === 'price_high_to_low') { %> selected <% } %>
                                        >Price: High to Low</option>
                                        
                                        <option value="average_ratings" 
                                            <% if (sortBy === 'average_ratings') { %> selected <% } %>
                                        >Average Ratings</option>
                                        
                                        <option value="featured" 
                                            <% if (sortBy === 'featured') { %> selected <% } %>
                                        >Featured</option>
                                        
                                        <option value="new_arrivals" 
                                            <% if (sortBy === 'new_arrivals') { %> selected <% } %>
                                        >New Arrivals</option>
                                        
                                        <option value="a_to_z" 
                                            <% if (sortBy === 'a_to_z') { %> selected <% } %>
                                        >A - Z</option>
                                        
                                        <option value="z_to_a" 
                                            <% if (sortBy === 'z_to_a') { %> selected <% } %>
                                        >Z - A</option>
                                    </select>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <% if (renderData.productData.length > 0) { %>
                      <% renderData.productData.forEach(product => { %>
                        <div class="col-lg-4 col-md-6 col-sm-6">
                          <div class="product__item">
                            <!-- Dynamic Image -->
                            <div class="product__item__pic">
                              <a href="/productDetails/<%= product._id %>">
                                <img src="/uploads/products/<%= product.mainImage %>" alt="<%= product.name %>" class="img-fluid product-image">
                              </a>
                              <% if (product.outOfStock) { %>
                                <div class="label out-of-stock" style="background-color: black; color: white;width: 109px; height: 20px;">Out of Stock</div>
                            <% } else if (product.isNew) { %>
                                <div class="label new" style="background-color: #36a300;width: 50px; height: 20px;">New</div>
                            <% } %>
                              <ul class="product__hover">
                                <li><a href="#"><img src="/userAssets/img/icon/heart.png" alt=""></a></li>
                                <% if (!product.outOfStock) { %>
                                    <li><a href="/addToCart?productId=<%= product._id %>"><span class="icon_bag_alt"></span></a></li>
                                <% } else { %>
                                    <li><span class="icon_bag_alt_disabled"></span></li>
                                <% } %>
                              </ul>
                            </div><br><br><br>
                            <div class="product__item__text">
                              <!-- Dynamic Name -->
                              <h6><%= product.name %></h6>
                              <!-- <a href="/addToCart?productId=<%= product._id %>" class="add-cart">+ Add To Cart</a> -->
                              <% if (!product.outOfStock) { %>
                                <!-- <li><a href="/addToCart?productId=<%= product._id %>"><span class="icon_bag_alt"></span></a></li> -->
                              <a href="/addToCart?productId=<%= product._id %>" class="add-cart">+ Add To Cart</a>

                            <% } else { %>
                                <a href="#" class=" add-cart" disabled>Out of Stock</a>
                            <% } %>
                              <!-- Static Rating -->
                              <div class="rating">
                                <i class="fa fa-star-o"></i>
                                <i class="fa fa-star-o"></i>
                                <i class="fa fa-star-o"></i>
                                <i class="fa fa-star-o"></i>
                                <i class="fa fa-star-o"></i>
                              </div>
                              <!-- Dynamic Price -->
                              <h5>$<%= product.price.toFixed(2) %></h5>
                              <div class="product__color__select">
                                <label for="pc-<%= product._id %>">
                                  <input type="radio" id="pc-<%= product._id %>">
                                </label>
                                <label class="active black" for="pc-black-<%= product._id %>">
                                  <input type="radio" id="pc-black-<%= product._id %>">
                                </label>
                                <label class="grey" for="pc-grey-<%= product._id %>">
                                  <input type="radio" id="pc-grey-<%= product._id %>">
                                </label>
                              </div>
                            </div>
                          </div>
                        </div>
                      <% }); %>
                    <% } else { %>
                      <!-- Display No Products Available -->
                      <div class="col-12">
                        <div class="alert alert-warning text-center" role="alert">
                          No products are available at the moment. Please check back later!
                        </div>
                      </div>
                    <% } %>
                  </div>
                  
                  
                  
                <div class="row">
                    <div class="col-lg-12">
                        <div class="product__pagination">
                            <a class="active" href="#">1</a>
                            <a href="#">2</a>
                            <a href="#">3</a>
                            <span>...</span>
                            <a href="#">21</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Shop Section End -->

<%- include('../layouts/userFooter.ejs') %>
